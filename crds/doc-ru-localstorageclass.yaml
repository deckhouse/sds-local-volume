spec:
  versions:
    - name: v1alpha1
      schema:
        openAPIV3Schema:
          description: |
            LocalStorageClass — пользовательский ресурс Kubernetes, определяющий конфигурацию для Kubernetes StorageClass.
          properties:
            spec:
              description: |
                Определяет конфигурацию Kubernetes StorageClass.
              properties:
                reclaimPolicy:
                  description: |
                    Политика освобождения ресурсов для StorageClass. Возможные значения:
                    - `Delete` — при удалении PersistentVolumeClaim также удаляются PersistentVolume и связанное хранилище;
                    - `Retain` — при удалении PersistentVolumeClaim остаются PersistentVolume и связанное хранилище.
                volumeBindingMode:
                  description: |
                    Режим привязки томов для StorageClass. Возможные значения:
                    - `Immediate` — создаёт PersistentVolume сразу после создания PersistentVolumeClaim;
                    - `WaitForFirstConsumer` — создаёт PersistentVolume только после создания пода, использующего PersistentVolumeClaim.
                lvm:
                  description: |
                    Конфигурация LVM.
                  properties:
                    type:
                      description: |
                        Тип выделения ресурсов для логических томов LVM (LV), создаваемых для PersistentVolume (PV).
                    thick:
                      description: |
                        Настройки для Logical Volumes в ресурсе LVMVolumeGroup.
                      properties:
                        contiguous:
                          description: |
                            Если установлено в `true`, логический том создаётся с флагом `contiguous`.
                            
                            > **Внимание:** используйте этот флаг с осторожностью. Он может привести к неправильному планированию подов, использующих PersistentVolume. Шедулер проверяет свободное место в VG и выбирает узлы с наибольшим количеством свободного места, но не может определить максимальное количество последовательного свободного места. В результате под может быть запланирован на узел, где том не сможет быть создан из-за недостатка последовательного свободного места. В таком случае потребуется ручное вмешательство администратора.
                    volumeCleanup:
                      description: |
                        Метод очистки тома после удаления PersistentVolume.
                        
                        Если параметр не задан, полное удаление данных не гарантируется.
                        
                        Возможные значения:
                        
                        - `RandomFillSinglePass` — том перезаписывается случайными данными один раз перед удалением. **Не рекомендуется** для твердотельных накопителей, так как перезапись уменьшает ресурс накопителя. Для thin-томов перезаписывается только используемое на момент удаления тома пространство.
                        - `RandomFillThreePass` — том перезаписывается случайными данными три раза перед удалением. **Не рекомендуется** для твердотельных накопителей, так как перезапись уменьшает ресурс накопителя. Для thin-томов перезаписывается только используемое на момент удаления тома пространство.
                        - `Discard` — перед удалением все блоки тома отмечаются как свободные с помощью системного вызова `discard`. Применимо только для твердотельных накопителей и thick-томов.
                    lvmVolumeGroups:
                      description: |
                        Список ресурсов LVMVolumeGroup, на которых создаются PersistentVolume.
                      items:
                        properties:
                          name:
                            description: |
                              Имя ресурса LVMVolumeGroup.
                          thin:
                            description: |
                              Конфигурация thin pool в ресурсе LVMVolumeGroup.
                            properties:
                              poolName:
                                description: |
                                  Имя thin pool.
                rawFile:
                  description: |
                    Конфигурация RawFile для томов на основе локальных файлов, смонтированных как loop-устройства.
                  properties:
                    dataDir:
                      description: |
                        Директория для хранения файлов томов.
                        По умолчанию: /var/lib/sds-local-volume/rawfile
                    sparse:
                      description: |
                        Если `true`, создаются разреженные файлы (быстрее, но может вызвать фрагментацию).
                        Если `false`, файлы предварительно выделяются (медленнее, но без фрагментации).
                    nodes:
                      description: |
                        Список узлов, на которых могут создаваться тома RawFile.
                        Если список пуст, используются все узлы.
                      items:
                        properties:
                          name:
                            description: |
                              Имя узла.
                          dataDir:
                            description: |
                              Директория для данных на этом узле (переопределяет глобальный dataDir).
                fsType:
                  description: |
                    Тип файловой системы для StorageClass.
            status:
              description: |
                Текущее состояние StorageClass.
              properties:
                phase:
                  description: |
                    Текущее состояние StorageClass. Возможные значения:
                    
                    - `Failed` — контроллер получил некорректную конфигурацию или возникли ошибки в ходе выполнения операций;
                    - `Created` — все операции завершились успешно.
                reason:
                  description: |
                    Дополнительная информация о текущем состоянии StorageClass.
