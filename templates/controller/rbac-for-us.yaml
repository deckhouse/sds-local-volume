{{- /* RBAC */ -}}
{{- $rbacConfig := dict
  "roleRules" (list
    (dict "apiGroups" (list "") "resources" (list "secrets") "verbs" (list "get" "list" "watch"))
    (dict "apiGroups" (list "") "resources" (list "pods") "verbs" (list "get" "list" "watch" "update"))
    (dict "apiGroups" (list "coordination.k8s.io") "resources" (list "leases") "verbs" (list "get" "watch" "list" "delete" "update" "create"))
  )
  "clusterRoleRules" (list
    (dict "apiGroups" (list "") "resources" (list "nodes" "persistentvolumes") "verbs" (list "get" "list" "watch" "patch" "update"))
    (dict "apiGroups" (list "") "resources" (list "events") "verbs" (list "create" "list"))
    (dict "apiGroups" (list "storage.deckhouse.io") "resources" (list "localstorageclasses" "lvmvolumegroups") "verbs" (list "get" "list" "create" "delete" "watch" "update"))
    (dict "apiGroups" (list "storage.k8s.io") "resources" (list "storageclasses") "verbs" (list "create" "delete" "list" "get" "watch" "update"))
    (dict "apiGroups" (list "") "resources" (list "pods" "persistentvolumeclaims" "persistentvolumes") "verbs" (list "get"))
  )
}}
{{ include "helm_lib_module_controller_rbac" (list . $rbacConfig) }}
